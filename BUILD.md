# Webpack Build Setup

## Setup Instructions

1. **Install dependencies:**
   ```bash
   npm install
   ```

2. **Build the client code:**
   
   **Development build (with source maps):**
   ```bash
   npm run build:dev
   ```
   
   **Production build (minified):**
   ```bash
   npm run build
   ```
   
   **Watch mode (auto-rebuild on file changes):**
   ```bash
   npm run watch
   ```

3. **Run the app:**
   
   **Start the server:**
   ```bash
   npm start
   ```
   
   **Development mode with hot reload (server + webpack watch):**
   In one terminal, run webpack in watch mode:
   ```bash
   npm run watch
   ```
   
   In another terminal, run nodemon:
   ```bash
   npm run dev
   ```

## Project Structure

```
src/
├── app.js                 # Express server
├── client/
│   ├── dist/             # Bundled output (generated by webpack)
│   ├── login/
│   │   ├── index.html    # Login page entry point
│   │   ├── LoginApp.vue  # Login Vue component
│   │   ├── login.js      # Login bundle entry
│   │   └── login.css     # Login styles
│   ├── home/
│   │   ├── index.html    # Home page entry point (protected)
│   │   ├── HomeApp.vue   # Home Vue component with auth check
│   │   ├── home.js       # Home bundle entry
│   │   └── home.css      # Home styles
│   ├── todos/
│   │   ├── TodosApp.vue  # Todos Vue component
│   │   ├── todos.js      # Todos bundle entry
│   │   └── todos.css     # Todos styles
│   ├── todos.html        # Todos page entry point
│   └── style.css         # Static styles (legacy)
├── config/               # Configuration files
├── controllers/          # Route controllers
├── middleware/           # Express middleware
├── routes/               # Route definitions
└── services/            # Business logic

webpack.config.js        # Webpack configuration
.babelrc                # Babel configuration
package.json            # Dependencies and scripts
```

## Features

- **Vue 3** with SFC (Single File Components)
- **Webpack 5** for bundling
- **Babel** for ES6+ transpilation
- **CSS Loader & Style Loader** for CSS management
- **Hot module reloading** with nodemon on backend
- **Development and production builds**
- **Source maps** for debugging
- **Protected Routes** - Home page checks authentication before loading

## Workflow

1. Modify Vue components in `src/client/login/`, `src/client/home/`, or `src/client/todos/`
2. Webpack watches for changes and rebuilds bundles to `src/client/dist/`
3. Browser serves the bundled files from `/dist/` directory
4. Server auto-restarts with nodemon when backend files change

## Access the App

- **Login Page:** http://localhost:3000/login or http://localhost:3000/
- **Home Page:** http://localhost:3000/home (requires login - redirects to /login if not authenticated)
- **Dashboard:** http://localhost:3000/todos.html (requires login)
- **API Health:** http://localhost:3000/api/health
- **Auth Endpoints:**
  - `POST /api/auth/login` - Login user
  - `GET /api/auth/logout` - Logout user
  - `GET /api/auth/me` - Get current user info

## Authentication Flow

1. User visits `/` or `/login`
2. Enters username and password
3. Submits form → `POST /api/auth/login`
4. Backend creates session and sets cookie `todo-session-{env}`
5. Frontend redirects to `/home`
6. Home page checks authentication via `GET /api/auth/me`
7. If authenticated, displays welcome page
8. If not authenticated, redirects back to `/login`
9. User can click Logout button to clear session and go back to login
